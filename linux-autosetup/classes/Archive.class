# Credit to Maxim Norin https://github.com/mnorin
# for OOP emulation base from https://stackoverflow.com/questions/36771080/creating-classes-and-objects-using-bash-scripting#comment115718570_40981277
# Modified by Aurtzy

# Class named "Archive" for bash object

# fields
declare -Ag fields

# Handles getting/setting fields.
Archive.field() {
	if [ "$2" == "=" ]; then
		fields[$1]=$3
	else
		echo "${fields[$1]}"
	fi
}

# Archive class constructor
# Params: $1 = 
Archive.constructor() {
	Archive.field name = "Archive"
	
	
	
	echo "Archive: Built archive object."
}

# Getters/setters

Archive.archiveType() {
	if [[ "$2" != "" && "$2" != 'COMPRESS' && "$2" != 'ENCRYPT' ]]; then
		echo "Archive: Error: archive type input $2 was not recognized!"
		echo "Script will not continue. Please resolve."
		echo "Exiting..."
		exit 1
	fi
	App.field archiveType "$1" "$2"
}
Archive.sourcePaths() {
	if [ "$2" = '' ]; then
		for (( i=0 ; i < $(Archive.sourcePathsCount) ; i++ )); do
			Archive.field sourcePath${i}
		done
	else
		if [ ${3: -1} = '/' ]; then
			sourcePath=${3::-1}
		fi
		Archive.field sourcePath${1} "$2" "$sourcePath"
	fi
}
Archive.sourcePathsCount() {
	declare -i intParam=$2
	Archive.field sourcePathsCount "$1" "$intParam"
}

# Archiving functions

Archive.compress() {
	echo
}
Archive.decompress() {
	echo
}

Archive.encrypt() {
	echo
}
Archive.decrypt() {
	echo
}

# Install Archives to appropriate directories
Archive.install() {
	echo "#implement Archive.install"
}

Archive.archive() {
	echo "#implement Archive.backup"
}
